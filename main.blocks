<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="kwmY?fXF^c~{imSBB^;P">digitsUpper</variable><variable id="0ivl:s]}}9MTRc:msVEL">result</variable><variable id=".0^n+g#PX$;iL:WG]mY[">_KEYBOARD_CHANGE_EVENT</variable><variable id="D+2GKkoWzZmBPV]N{.(H">_KEYBOARD_ENTER_EVENT</variable><variable id="4PVC?$l}Jn|dvbp|KnXZ">_KEYBOARD_CANCEL_EVENT</variable><variable id="n155seI^}c~8ftZYY$AY">PADDING</variable><variable id="1CMzGXzq,lqW:s*2L5-y">NUM_LETTERS</variable><variable id="b,#=*8[4)keQjCmtT6BR">ALPHABET_ROW_LENGTH</variable><variable id="nt`m#tFca|8LTF)lhjgh">NUM_ROWS</variable><variable id="$FFa%(XB{0_[h{wV9;)c">INPUT_ROWS</variable><variable id="qM?|;36(UU[`BBNK.ZN0">CONTENT_WIDTH</variable><variable id="^v8@7z:`s8{KeEMKNXWa">CONTENT_HEIGHT</variable><variable id="w`~4n#68w.~kEhz.KAUV">CONTENT_TOP</variable><variable id="aCqT^rKl$,T|zt$82rSA">CELL_WIDTH</variable><variable id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</variable><variable id="vChHWeq3LtR%)97e:T~/">LETTER_OFFSET_X</variable><variable id="J7d}4:mrY^[GdH+Vf(+*">LETTER_OFFSET_Y</variable><variable id="n`#Sfjx3],XTu][-=cyr">BLANK_PADDING</variable><variable id="n|=Bo,s9U6lnjV:}Yt@1">ROW_LEFT</variable><variable id="PKLP=B%wW?wo!r+]l_hQ">BOTTOM_BAR_ALPHABET_MARGIN</variable><variable id="x0uS1JT:GZ:s**ae];=G">BOTTOM_BAR_HEIGHT</variable><variable id="]c=S}BoW5PeqdqoWY?J:">BOTTOM_BAR_BUTTON_WIDTH</variable><variable id="F#u8Ldt_NX01x3@#tw)Q">BOTTOM_BAR_TEXT_Y</variable><variable id="73V.CYnWc-w8YMXV:mne">BOTTOM_BAR_SHIFT_X</variable><variable id="S5NjhI@3kkVT{v(#!9sz">BOTTOM_BAR_CONFIRM_X</variable><variable id="Fpg3mQr#7TyiME9l1/^q">CONFIRM_BUTTON_LEFT</variable><variable id="$y@~XWLSDKgV~4o7iOre">ALPHABET_HEIGHT</variable><variable id="v@0~@`8R]5s!3)Ld@hai">ALPHABET_TOP</variable><variable id=";)r;}ai]SI|H1xp_/CS0">ALPHABET_INPUT_MARGIN</variable><variable id="TLY@M)PzIyRId9%@flVc">INPUT_HEIGHT</variable><variable id="Rn[o)GjkOv3V%a(%SRNU">INPUT_TOP</variable><variable id="H2xJ)U;NxBehVNe%a2Vy">lowerShiftText</variable><variable id="OkMol|)Q]N^o@Mw+5;k|">upperShiftText</variable><variable id="E2.Rad(:igJ8Db]bf?/]">confirmText</variable></variables><block type="pxt-on-start" id="1zxDp,sIadrMb3D!#0k_" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="c26bmVILbQ3ppl^Pwb+N"><field name="VAR" id=".0^n+g#PX$;iL:WG]mY[">_KEYBOARD_CHANGE_EVENT</field><value name="VALUE"><shadow type="math_number" id=".RtC9PuFN@7WuGryo:=="><field name="NUM">7339</field></shadow></value><next><block type="variables_set" id="K$7^T4fN$-A]}BD7u)O_"><field name="VAR" id="D+2GKkoWzZmBPV]N{.(H">_KEYBOARD_ENTER_EVENT</field><value name="VALUE"><shadow type="math_number" id="KzbsdOP=*49ggHBPHI1Z"><field name="NUM">7340</field></shadow></value><next><block type="variables_set" id="|YJbBB`TA7pA0sCPN;#X"><field name="VAR" id="4PVC?$l}Jn|dvbp|KnXZ">_KEYBOARD_CANCEL_EVENT</field><value name="VALUE"><shadow type="math_number" id="sp}QlvjB5h@,`g(3hh[t"><field name="NUM">7341</field></shadow></value><next><block type="typescript_statement" id="O1a}uY9LoA0@0(|Yc+XY"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface PromptTheme {" line1="        colorPrompt: number;" line2="        colorInput: number;" line3="        colorInputHighlighted: number;" line4="        colorInputText: number;" line5="        colorAlphabet: number;" line6="        colorCursor: number;" line7="        colorBackground: number;" line8="        colorBottomBackground: number;" line9="        colorBottomText: number;" line10="    }" numlines="11"></mutation><next><block type="typescript_statement" id="EUIU!wY8Q7wwS+nTrq.="><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const font = image.font8;" numlines="1" declaredvars="font"></mutation><next><block type="variables_set" id="dSCmQjEj*rl8+F6966b5"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="FRyM(sEDLjldm)a^NhZ!"><field name="NUM">4</field></shadow></value><next><block type="variables_set" id="z40hfeMd4K@P2+yYRbp*"><field name="VAR" id="1CMzGXzq,lqW:s*2L5-y">NUM_LETTERS</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id=":odZ5;.eb.rHrk{=[0Sa"><field name="NUM">26</field></shadow></value><next><block type="variables_set" id="?er|s%Um@jF$:[@^oRok"><field name="VAR" id="b,#=*8[4)keQjCmtT6BR">ALPHABET_ROW_LENGTH</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="KiSE/N(@FT+ANx2bHi!r"><field name="NUM">12</field></shadow></value><next><block type="variables_set" id=",*z[x]C-}cq$:z%x#a|p"><field name="VAR" id="nt`m#tFca|8LTF)lhjgh">NUM_ROWS</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="^9/q#GMB|zX#jjxBb7rD"><field name="NUM">0</field></shadow><block type="math_js_round" id="x+f2o.-WQ-^hTp-=1~zt"><field name="OP">ceil</field><value name="ARG0"><shadow type="math_number" id="yvSkB[z%H7?JNj@wz@El"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="(C%:`Fr,J8_+/^mfOZH;"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="]aoAGBd]ZSbt4Jd2R2{A"><field name="NUM">0</field></shadow><block type="variables_get" id="4S9+Ey!kb3t$(|:QT4=R"><field name="VAR" id="1CMzGXzq,lqW:s*2L5-y">NUM_LETTERS</field></block></value><value name="B"><shadow type="math_number" id="@_k1X}}^Qh#IUDip-4t_"><field name="NUM">0</field></shadow><block type="variables_get" id="A_1[N.IhLMw~33Wpv6K]"><field name="VAR" id="b,#=*8[4)keQjCmtT6BR">ALPHABET_ROW_LENGTH</field></block></value></block></value></block></value><next><block type="variables_set" id="$X%82tL9?.+5%%cY8vg."><field name="VAR" id="$FFa%(XB{0_[h{wV9;)c">INPUT_ROWS</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="tl)g-9@5aF98MqbJ@i=t"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="R`hId9h@{fizW`/?NeHm"><field name="VAR" id="qM?|;36(UU[`BBNK.ZN0">CONTENT_WIDTH</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="7d4dyKLOhprV^GR_w~_H"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="oS?B!=7Pv}ck9d^nqfU7"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="[y+{k{G6rDPm6OwH$*$^"><field name="NUM">0</field></shadow><block type="typescript_expression" id="o5y(jcL/chpUP/Q$t31m"><field name="EXPRESSION">screen.width</field></block></value><value name="B"><shadow type="math_number" id="Owu`mgnDjR4#v@CXY.TT"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="+Xm)W).0xdYI/VXes,Lf"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="fKka=lgHh?rDD4%K2j`t"><field name="NUM">0</field></shadow><block type="variables_get" id="j*3E=;9h@z^U/^^?vW}/"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><value name="B"><shadow type="math_number" id="4sK9S(1(U^gDuq3#%7/d"><field name="NUM">2</field></shadow></value></block></value></block></value><next><block type="variables_set" id="nJleGR.sNz8nl~p|hko)"><field name="VAR" id="^v8@7z:`s8{KeEMKNXWa">CONTENT_HEIGHT</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="Ixwv)Jc[zKNQ+VKI9B,W"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="LQT}IjB7dT$F@Gb.]FqR"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="2#3^+j`*dxZK(]*$_b*r"><field name="NUM">0</field></shadow><block type="typescript_expression" id="bS@;a=hLcGmGDBAy4}M~"><field name="EXPRESSION">screen.height</field></block></value><value name="B"><shadow type="math_number" id="xN1X.;n9MuQ^(]0^A`8M"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="H=UMIM4gjhpGajRwocGz"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="J#$3WV#S{@6ePds!L1}s"><field name="NUM">0</field></shadow><block type="variables_get" id="hL*G=f=S.xzE`ewut;/i"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><value name="B"><shadow type="math_number" id="e.|mxhEn%JCX=(L_qomP"><field name="NUM">2</field></shadow></value></block></value></block></value><next><block type="variables_set" id="(qT8H)1Wt0.OGXQ^X~9K"><field name="VAR" id="w`~4n#68w.~kEhz.KAUV">CONTENT_TOP</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="a9#e7,[QuL+_7d;GZW[7"><field name="NUM">0</field></shadow><block type="variables_get" id="[R(8/TRW+V@@udV/.WzT"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><next><block type="variables_set" id="iBbuLsmQph0yZfM-Z53U"><field name="VAR" id="aCqT^rKl$,T|zt$82rSA">CELL_WIDTH</field><comment pinned="false" h="80" w="160">Dimensions of a "cell" that contains a letter
% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="46b*H(+#^B,AS1U9B5Cg"><field name="NUM">0</field></shadow><block type="math_js_round" id="u@g1j`HU5O7[WE/-[%8|"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number" id=":ZLxKoE?.bEzRF^C~sTH"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="9U/$Y8J1$SnlV`+J^zxa"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="/`Ze7)[s)5{H,pTIJrjh"><field name="NUM">0</field></shadow><block type="variables_get" id="PP28U(qLYtThX1RM,`Y3"><field name="VAR" id="qM?|;36(UU[`BBNK.ZN0">CONTENT_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="!-0=;alE5;xcfp)yHeJz"><field name="NUM">0</field></shadow><block type="variables_get" id="D`Qb!H~;c)q~,a?a=NW7"><field name="VAR" id="b,#=*8[4)keQjCmtT6BR">ALPHABET_ROW_LENGTH</field></block></value></block></value></block></value><next><block type="variables_set" id="[k~7:fL`!f.S3DGR5:(:"><field name="VAR" id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="0S[X]Bp:=^]pY2Ui.-|@"><field name="NUM">0</field></shadow><block type="variables_get" id="*nyA;7kBM/$Yu|VDc.G}"><field name="VAR" id="aCqT^rKl$,T|zt$82rSA">CELL_WIDTH</field></block></value><next><block type="variables_set" id="}AuxX!Tl2-V%8A/R+:7T"><field name="VAR" id="vChHWeq3LtR%)97e:T~/">LETTER_OFFSET_X</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="K/5T];b4X^~ugVxKfO~K"><field name="NUM">0</field></shadow><block type="math_js_round" id="hde,:]z(uBM-1+DB26Q]"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number" id="v=]@[^!:Gb8$-+tqqZOL"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="L44{`BL#UtQ0V[W^Um$p"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="MeumVg}Vz}^vXC}l^w`K"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Z:,964Jr)mk-3fW):f#,"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="0~n894MBK+}bs1BJ/6Le"><field name="NUM">0</field></shadow><block type="variables_get" id="1!nfD*xZr{wKdHvk^pD!"><field name="VAR" id="aCqT^rKl$,T|zt$82rSA">CELL_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="M3f^pyvyImw3^e/Wfzn6"><field name="NUM">0</field></shadow><block type="typescript_expression" id="!N$u3T[~Lc[V.RI%i}P3"><field name="EXPRESSION">font.charWidth</field></block></value></block></value><value name="B"><shadow type="math_number" id="u;-CnaWC^|5z+LE?QWEn"><field name="NUM">2</field></shadow></value></block></value></block></value><next><block type="variables_set" id="L:fsfU|[(*EqhrjKoqvn"><field name="VAR" id="J7d}4:mrY^[GdH+Vf(+*">LETTER_OFFSET_Y</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="}%n!N/^Vovvk_h!qC]Jp"><field name="NUM">0</field></shadow><block type="math_js_round" id="gl0eoICzm%Xr$*s=_B!J"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number" id="KNt=`Ru{-*oQt8cRMs)p"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="OAbf8a?9]](v7sw7xQC["><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="}.bffGS%Q2%|`1`vfB28"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="sA!Wi`#^L^vXZ#U6,8c|"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="%te%.fyg)dUN]%co;DJ,"><field name="NUM">0</field></shadow><block type="variables_get" id="eRcgs7]X#F7_#16Qf`08"><field name="VAR" id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</field></block></value><value name="B"><shadow type="math_number" id="~BmMAm;`u0hp^UC*=tk."><field name="NUM">0</field></shadow><block type="typescript_expression" id="QF:22SNgD#.k.LK}[?Y."><field name="EXPRESSION">font.charHeight</field></block></value></block></value><value name="B"><shadow type="math_number" id="Zidr!a2,,[)`Z?Mo9Zq2"><field name="NUM">2</field></shadow></value></block></value></block></value><next><block type="variables_set" id="H2UN#dQ85|QN90[P]sIS"><field name="VAR" id="n`#Sfjx3],XTu][-=cyr">BLANK_PADDING</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="x5j!zbk%wp:=jDnn*xjK"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="4.{M[dCYFlRdVQ)^Otx."><field name="VAR" id="n|=Bo,s9U6lnjV:}Yt@1">ROW_LEFT</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="@lWRkpUxRv~Yd~dqEH-y"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="$3WaX=R.k_.5s2)QS[!M"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="7YM2u/[s]jdd$AXoKUxH"><field name="NUM">0</field></shadow><block type="variables_get" id="qtROOL:$Dw.(FVc[Wjv3"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><value name="B"><shadow type="math_number" id="AFED!dr*G`!-I~^,[Cgr"><field name="NUM">0</field></shadow><block type="math_js_round" id="8LAj%q.gj99hR9,Y~Ff_"><field name="OP">floor</field><value name="ARG0"><shadow type="math_number" id="2]Hv!^sS5g@b5szJ3*f%"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="FO8cYUxSRp^58ii1Xnor"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="eY^@7i/rNv|sB#D_r(:c"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="XbTciJ~yGjH=z}~iq9?}"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="dw2;d6xoy,5x+Ypl*:wA"><field name="NUM">0</field></shadow><block type="variables_get" id="Zwuj8,CYJeEq%*IdjJ}8"><field name="VAR" id="qM?|;36(UU[`BBNK.ZN0">CONTENT_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="TzAFDy~[Jhi`8a3de{~l"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Cu@B-Y|xXezfs7{Tl|9T"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="^iTnDhDW0){)ZndYzOZ^"><field name="NUM">0</field></shadow><block type="variables_get" id=",=1),iAXMm0C;6LB!MaL"><field name="VAR" id="aCqT^rKl$,T|zt$82rSA">CELL_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="T~{jCzc#]=swsY*VA9TA"><field name="NUM">0</field></shadow><block type="variables_get" id="-|VwTI:M%#oE;dX^cMCG"><field name="VAR" id="b,#=*8[4)keQjCmtT6BR">ALPHABET_ROW_LENGTH</field></block></value></block></value></block></value><value name="B"><shadow type="math_number" id="y!};JPo}bpsZ=I1Ji)kY"><field name="NUM">2</field></shadow></value></block></value></block></value></block></value><next><block type="variables_set" id="FvQj1;9:p=cpD[GeC+~A"><field name="VAR" id="PKLP=B%wW?wo!r+]l_hQ">BOTTOM_BAR_ALPHABET_MARGIN</field><comment pinned="false" h="80" w="160">Dimensions of the bottom bar
% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="3pS)5AJ@v%Wk-eb0qI9m"><field name="NUM">4</field></shadow></value><next><block type="variables_set" id="pVG;1wf$V[]YA0pTTeYC"><field name="VAR" id="x0uS1JT:GZ:s**ae];=G">BOTTOM_BAR_HEIGHT</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="[:%sgz#6q{+a_DHF(4/M"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="_Zvr)pMNQWpBu*Kh7g,v"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="6?J)BBVYra|{*J1wx43V"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="@LhlCUBg4i*yY=/o8@rK"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="swYgjf+o?{)A$ipx6Wu0"><field name="NUM">0</field></shadow><block type="variables_get" id="dc}^D!M~|84O2NyHC4Nb"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><value name="B"><shadow type="math_number" id="epVP0rZ_Jad5{std[AhZ"><field name="NUM">0</field></shadow><block type="variables_get" id="A{)!,`R(141%%iW`5rxQ"><field name="VAR" id="PKLP=B%wW?wo!r+]l_hQ">BOTTOM_BAR_ALPHABET_MARGIN</field></block></value></block></value><value name="B"><shadow type="math_number" id="slN3=@vXp9$E9uVc_]xf"><field name="NUM">0</field></shadow><block type="variables_get" id="pyiwmqI}MP}9HG2{pZR/"><field name="VAR" id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</field></block></value></block></value><next><block type="variables_set" id="x$`5qUx7*bPhW]HeJko`"><field name="VAR" id="]c=S}BoW5PeqdqoWY?J:">BOTTOM_BAR_BUTTON_WIDTH</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="7v70:hJ!`eOT+|6j33K+"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="LwndeIYVm@@q)@5Vi1=t"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="V^MFd[jTxd.cAz=ZJhY3"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="B_#R.`4m?;X#x(m#Vd5;"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="|HVyx6Xz=olWyZhc(Me."><field name="NUM">0</field></shadow><block type="variables_get" id="|*TR`~n/KZCmv2ICVnh@"><field name="VAR" id="n155seI^}c~8ftZYY$AY">PADDING</field></block></value><value name="B"><shadow type="math_number" id="@RZ?K1P@7Sj7gquU-6$*"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="vOBc7WY}If_6i,L`h,Mw"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="1,hdpEnr=NCF)5JO2!:I"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="Y3q(1!$:N{BiZ1JNuAPf"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Lvl$Ii~u{%jasrJWOCv#"><field name="EXPRESSION">font.charWidth</field></block></value><value name="B"><shadow type="math_number" id="(R~fK*X{1.%kh]J91h86"><field name="NUM">3</field></shadow></value></block></value></block></value><next><block type="variables_set" id="c9gMdT4il$|~y%J)MT:`"><field name="VAR" id="F#u8Ldt_NX01x3@#tw)Q">BOTTOM_BAR_TEXT_Y</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="s55_TuJm%[rp-bhnV9:#"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="WUQ/5^Ev)BB^[jy@rK+W"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id=".]qQB5uJnzA`h6#1f.5!"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="=eoM!bl(d6I^rFxVVOCp"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="wcmu*l){TPq.)hw-r_$B"><field name="NUM">0</field></shadow><block type="variables_get" id="n{U{5b:bYrIZ{V4Cr1qd"><field name="VAR" id="x0uS1JT:GZ:s**ae];=G">BOTTOM_BAR_HEIGHT</field></block></value><value name="B"><shadow type="math_number" id="V@s0c]l-F@PB4q30izK0"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Cs7x/F23#gE9[uD?rYEl"><field name="EXPRESSION">font.charHeight</field></block></value></block></value><value name="B"><shadow type="math_number" id="5C@B.fBzY|:y!91xd8nm"><field name="NUM">2</field></shadow></value></block></value><next><block type="variables_set" id=",E;].EgvZnb,E:h6O?[$"><field name="VAR" id="73V.CYnWc-w8YMXV:mne">BOTTOM_BAR_SHIFT_X</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="e8N%-4ag4+W+OWfOma93"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="M-kjNHn%I;sqgX[R1Zsi"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="8G?V7|N+.a@^Tw:*],mH"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="lW.,v?qNmhH/c;k1SpdY"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="+8/HYrViM;%-,|F9?C=t"><field name="NUM">0</field></shadow><block type="variables_get" id="S3Io@F#:wN1WH).e*??9"><field name="VAR" id="]c=S}BoW5PeqdqoWY?J:">BOTTOM_BAR_BUTTON_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="LP1K7^,vT1kK6^m7Gu$R"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="maX.QcUHHM)7wP$Gg:.;"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="pevmLq:@RXO-m#a^Si6r"><field name="NUM">0</field></shadow><block type="typescript_expression" id="0kVEjwpO9oL#0-Vg;y1w"><field name="EXPRESSION">font.charWidth</field></block></value><value name="B"><shadow type="math_number" id="R!B5$j:YMzYD{r[UX=T`"><field name="NUM">3</field></shadow></value></block></value></block></value><value name="B"><shadow type="math_number" id="tv`z.Lzx,DG(_xd]$|yF"><field name="NUM">2</field></shadow></value></block></value><next><block type="variables_set" id="O5B_y%b7ZLepN]Yr/Hwz"><field name="VAR" id="S5NjhI@3kkVT{v(#!9sz">BOTTOM_BAR_CONFIRM_X</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="Xa_+5WKHjO5:n7Q]7cHq"><field name="NUM">0</field></shadow><block type="math_arithmetic" id=")t#6BNYT4g~lH-:cabic"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="5LOD0n-h4tdo)fS.Fww$"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="?$01v.[Y2s^,e#3*AZKQ"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="_iy3A|r@A$0#:{xDMm?_"><field name="NUM">0</field></shadow><block type="variables_get" id="Yt38gjPc-#~Nt]J~,o{,"><field name="VAR" id="]c=S}BoW5PeqdqoWY?J:">BOTTOM_BAR_BUTTON_WIDTH</field></block></value><value name="B"><shadow type="math_number" id="31(HM6^8GF?t5U0K:^9Z"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="/Djw2O9Sh-gX_,GSPI;d"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="_:%R`oP-5ybXZB0Y?un@"><field name="NUM">0</field></shadow><block type="typescript_expression" id="1=xxKJsgr;Ydf-3GL8Z;"><field name="EXPRESSION">font.charWidth</field></block></value><value name="B"><shadow type="math_number" id="aNP74Eq?bt.:EZQ~h%!r"><field name="NUM">2</field></shadow></value></block></value></block></value><value name="B"><shadow type="math_number" id="bHUaoJu@76~YYG18j9=W"><field name="NUM">2</field></shadow></value></block></value><next><block type="variables_set" id="v6!#~c@uh75O=q)2i-/."><field name="VAR" id="Fpg3mQr#7TyiME9l1/^q">CONFIRM_BUTTON_LEFT</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="_J]S$ko}4jeN0_|;gQi9"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="{+KaDLpy]A7ew`:s2`X/"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="/#zyMWP}%fYi=EG.NR6^"><field name="NUM">0</field></shadow><block type="typescript_expression" id="M%+_*HW^teO0Rv9fP^p9"><field name="EXPRESSION">screen.width</field></block></value><value name="B"><shadow type="math_number" id="LuzRPkf2d`MuQsqhBufO"><field name="NUM">0</field></shadow><block type="variables_get" id="7w)((qWV6^g@|QiJgK#p"><field name="VAR" id="]c=S}BoW5PeqdqoWY?J:">BOTTOM_BAR_BUTTON_WIDTH</field></block></value></block></value><next><block type="variables_set" id="!RsdU/,Tb`+/MOL5{H1N"><field name="VAR" id="$y@~XWLSDKgV~4o7iOre">ALPHABET_HEIGHT</field><comment pinned="false" h="80" w="160">Dimensions of the alphabet area
% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="Di0jfs?pW|x^zT7-8gE7"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="nwvSyvHS!m[M/YnrzmYm"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="+v3qn%A?1Wb{IAP}I*1z"><field name="NUM">0</field></shadow><block type="variables_get" id="pEn/S#(z4F%kyvS`L1!S"><field name="VAR" id="nt`m#tFca|8LTF)lhjgh">NUM_ROWS</field></block></value><value name="B"><shadow type="math_number" id="Ym]{_}6^:/X%}+pkZE}$"><field name="NUM">0</field></shadow><block type="variables_get" id="f8aSxYeKR!PId919w31C"><field name="VAR" id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</field></block></value></block></value><next><block type="variables_set" id="A.7G=%;A,+-=#6)bD3X_"><field name="VAR" id="v@0~@`8R]5s!3)Ld@hai">ALPHABET_TOP</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="R}@C`A4Ev*8*u5S5F=A4"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Uf^Pi=Xkcd~DHSF{45TA"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=")?MB)$}hgDbsBxG}8(}}"><field name="NUM">0</field></shadow><block type="math_arithmetic" id=";w*p%jJ%s2iREx3Cb:--"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="oF_kO[uad`rm#rkvB;`j"><field name="NUM">0</field></shadow><block type="math_arithmetic" id=",ty7%]W^N]iAzXvfrZOn"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id=":FE93$;`]Z^n91/Sk7W/"><field name="NUM">0</field></shadow><block type="variables_get" id=",!7!$csqN~{0o/`1/4J,"><field name="VAR" id="w`~4n#68w.~kEhz.KAUV">CONTENT_TOP</field></block></value><value name="B"><shadow type="math_number" id="9A3~2-F0bPf(M=vRxUx%"><field name="NUM">0</field></shadow><block type="variables_get" id="N|w{Hhk-kq_DIoULQWY/"><field name="VAR" id="^v8@7z:`s8{KeEMKNXWa">CONTENT_HEIGHT</field></block></value></block></value><value name="B"><shadow type="math_number" id="!$9B@kGAQml4k8VBCuA5"><field name="NUM">0</field></shadow><block type="variables_get" id="F`y`pO_{u)M?}?n}!8d,"><field name="VAR" id="$y@~XWLSDKgV~4o7iOre">ALPHABET_HEIGHT</field></block></value></block></value><value name="B"><shadow type="math_number" id="kP.|JEbrIZP69E?AcdH7"><field name="NUM">0</field></shadow><block type="variables_get" id="8X-,M?02=fRHBP.5X2EE"><field name="VAR" id="x0uS1JT:GZ:s**ae];=G">BOTTOM_BAR_HEIGHT</field></block></value></block></value><next><block type="variables_set" id="T?*4tvU4,0^jYt=]0O2E"><field name="VAR" id=";)r;}ai]SI|H1xp_/CS0">ALPHABET_INPUT_MARGIN</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="8/qFvaz0;L;kqv9p7B)1"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="ilVW8V;m=6{,e3HAMTyA"><field name="VAR" id="TLY@M)PzIyRId9%@flVc">INPUT_HEIGHT</field><comment pinned="false" h="80" w="160">Dimensions of area where text is input
% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="!7gU^D;OdVOi,%(?NNo="><field name="NUM">0</field></shadow><block type="math_arithmetic" id="z0,BR.nS%6d|+,SJz+JW"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="smd=?W/QP~hGN(,Q0%eL"><field name="NUM">0</field></shadow><block type="variables_get" id=",_%FP)GOH`^red/_q;CT"><field name="VAR" id="$FFa%(XB{0_[h{wV9;)c">INPUT_ROWS</field></block></value><value name="B"><shadow type="math_number" id="t.)}5ul*n~y`qc4vehr)"><field name="NUM">0</field></shadow><block type="variables_get" id="|*v@-ZuSiRytqtxt|VSm"><field name="VAR" id="h_=s~8@CtXkvah/__lZG">CELL_HEIGHT</field></block></value></block></value><next><block type="variables_set" id="=;wrolG5z%P25!7PETp/"><field name="VAR" id="Rn[o)GjkOv3V%a(%SRNU">INPUT_TOP</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="6Pd%bj5BkL3bptQ%x`.y"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="+@DaS#,3{n)ax-:L1{tY"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="|LTy$0a_;AzxZkcWzzLY"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="oT?;KnnQr4ojZPVfo=[["><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="r{*By(!P:H~O7BZ8PO^D"><field name="NUM">0</field></shadow><block type="variables_get" id="`%AUAy(n(nU]Oa/Z4u~U"><field name="VAR" id="v@0~@`8R]5s!3)Ld@hai">ALPHABET_TOP</field></block></value><value name="B"><shadow type="math_number" id="C.JkoSU=Z!`?k4_,75Gq"><field name="NUM">0</field></shadow><block type="variables_get" id="{#mxqH#c@%4Kq%B/M%OT"><field name="VAR" id="TLY@M)PzIyRId9%@flVc">INPUT_HEIGHT</field></block></value></block></value><value name="B"><shadow type="math_number" id="3D^{Q6::?]?DH!ym*h:7"><field name="NUM">0</field></shadow><block type="variables_get" id=",V)b-!H*jZKEu_%x6Dhr"><field name="VAR" id=";)r;}ai]SI|H1xp_/CS0">ALPHABET_INPUT_MARGIN</field></block></value></block></value><next><block type="variables_set" id="C0KBKaxj;sJ9r(Ipb}th"><field name="VAR" id="H2xJ)U;NxBehVNe%a2Vy">lowerShiftText</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="hA4Oj$i`Ui,vYSoL|+G9"><field name="NUM">0</field></shadow><block type="text" id="uWo:{a5IBOU5XJNF{GtW"><field name="TEXT">ABC</field></block></value><next><block type="variables_set" id="U_cIW0En1q|5Zp4coXDN"><field name="VAR" id="OkMol|)Q]N^o@Mw+5;k|">upperShiftText</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="-{H]EFfqeFPZ2#fKTJ_S"><field name="NUM">0</field></shadow><block type="text" id="?bNCZ-DEq79BXsDqAm{T"><field name="TEXT">abc</field></block></value><next><block type="variables_set" id=":Lk!@Di}NdU+tvCp5`Pd"><field name="VAR" id="kwmY?fXF^c~{imSBB^;P">digitsUpper</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="Xb.H0{-d|Z9^1MZt8C~a"><field name="NUM">0</field></shadow><block type="lists_create_with" id="%+?E-W~?+-j%i%X}mXvr" inline="false"><mutation items="10" horizontalafter="3"></mutation><value name="ADD0"><shadow type="text" id="!PMHk%Yw2]=/}/]~21A/"><field name="TEXT"> </field></shadow></value><value name="ADD1"><shadow type="text" id=":}iN/@ZhWa`R$q3wA4E3"><field name="TEXT">,</field></shadow></value><value name="ADD2"><shadow type="text" id="U@MMTPb`90/1|@t(2Jcu"><field name="TEXT">.</field></shadow></value><value name="ADD3"><shadow type="text" id="l2~RUn9Tg~0CAeh?ufcN"><field name="TEXT">?</field></shadow></value><value name="ADD4"><shadow type="text" id=".h)~O]u}Gs.~/CctLDW$"><field name="TEXT">!</field></shadow></value><value name="ADD5"><shadow type="text" id="3*u+KeNZr.biuh5f$,jv"><field name="TEXT">:</field></shadow></value><value name="ADD6"><shadow type="text" id="%I3#f=vkGxS#fe~^`D*z"><field name="TEXT">;</field></shadow></value><value name="ADD7"><shadow type="text" id="qMxNKY~[*i6Y6=5[59~("><field name="TEXT">"</field></shadow></value><value name="ADD8"><shadow type="text" id="tahVSG{-`Yp1[HzYkp[$"><field name="TEXT">(</field></shadow></value><value name="ADD9"><shadow type="text" id="1BaepUKd_?#prNs4NAqn"><field name="TEXT">)</field></shadow></value></block></value><next><block type="variables_set" id="i6L+72His6[.:y62D?X*"><field name="VAR" id="E2.Rad(:igJ8Db]bf?/]">confirmText</field><comment pinned="false" h="80" w="160">% whenUsed=true</comment><value name="VALUE"><shadow type="math_number" id="mIb8EyI)[1%L-0:tGC:g"><field name="NUM">0</field></shadow><block type="text" id="hhDx0$Vtvy#t/K264@6|"><field name="TEXT">OK</field></block></value><next><block type="typescript_statement" id="Z*!`hH`A2r/z?viaGn/4"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Prompt {" line1="        theme: PromptTheme;" line2="" line3="        message: string;" line4="        answerLength: number;" line5="        result: string;" line6="" line7="        protected confirmPressed: boolean;" line8="        protected cursorRow: number;" line9="        protected cursorColumn: number;" line10="        protected upper: boolean;" line11="        protected useSystemKeyboard: boolean;" line12="" line13="        protected renderable: scene.Renderable;" line14="        protected selectionStart: number;" line15="        protected selectionEnd: number;" line16="" line17="        protected keyboardRows: number;" line18="        protected keyboardColumns: number;" line19="" line20="        private changeTime = 0;" line21="" line22="        constructor(theme?: PromptTheme) {" line23="            if (theme) {" line24="                this.theme = theme;" line25="            }" line26="            else {" line27="                this.theme = {" line28="                    colorPrompt: 1," line29="                    colorInput: 3," line30="                    colorInputHighlighted: 5," line31="                    colorInputText: 1," line32="                    colorAlphabet: 1," line33="                    colorCursor: 7," line34="                    colorBackground: 15," line35="                    colorBottomBackground: 3," line36="                    colorBottomText: 1," line37="                };" line38="            }" line39="            this.cursorRow = 0;" line40="            this.cursorColumn = 0;" line41="            this.upper = false;" line42="            this.result = &quot;&quot;;" line43="            this.keyboardColumns = ALPHABET_ROW_LENGTH;" line44="            this.keyboardRows = NUM_ROWS;" line45="            this.selectionStart = 0;" line46="            this.selectionEnd = 0;" line47="        }" line48="" line49="        show(message: string, answerLength: number, useOnScreenKeyboard = false) {" line50="            this.message = message;" line51="            this.answerLength = answerLength;" line52="" line53="            controller._setUserEventsEnabled(false);" line54="            game.pushScene()" line55="" line56="            this.createRenderable();" line57="            this.confirmPressed = false;" line58="" line59="            if (!useOnScreenKeyboard &amp;&amp; control.deviceDalVersion() === &quot;sim&quot; &amp;&amp; helpers._isSystemKeyboardSupported()) {" line60="                this.useSystemKeyboard = true;" line61="                helpers._promptForText(this.answerLength, this.numbersOnly());" line62="                this.selectionEnd = 0;" line63="                this.selectionStart = 0;" line64="                control.onEvent(_KEYBOARD_CHANGE_EVENT, 0, () =&gt; {" line65="                    this.result = helpers._getTextPromptString().substr(0, this.answerLength);" line66="" line67="                    this.changeTime = game.runtime();" line68="" line69="                    this.selectionStart = helpers._getTextPromptSelectionStart();" line70="                    this.selectionEnd = helpers._getTextPromptSelectionEnd();" line71="                })" line72="" line73="                let cancelled = false;" line74="                let finished = false;" line75="" line76="                control.onEvent(_KEYBOARD_CANCEL_EVENT, 0, () =&gt; {" line77="                    cancelled = true;" line78="                });" line79="" line80="                control.onEvent(_KEYBOARD_ENTER_EVENT, 0, () =&gt; {" line81="                    finished = true;" line82="                });" line83="" line84="                pauseUntil(() =&gt; cancelled || finished);" line85="" line86="                if (cancelled) {" line87="                    this.useSystemKeyboard = false;" line88="                    this.selectionStart = this.result.length;" line89="                    this.selectionEnd = this.selectionStart;" line90="                    this.registerHandlers();" line91="                    pauseUntil(() =&gt; this.confirmPressed);" line92="                }" line93="            }" line94="            else {" line95="                this.useSystemKeyboard = false;" line96="                this.registerHandlers();" line97="                pauseUntil(() =&gt; this.confirmPressed);" line98="            }" line99="" line100="            game.popScene();" line101="            controller._setUserEventsEnabled(true);" line102="" line103="            return this.result;" line104="        }" line105="" line106="        protected numbersOnly() {" line107="            return false;" line108="        }" line109="" line110="        protected createRenderable() {" line111="            if (this.renderable) {" line112="                this.renderable.destroy();" line113="            }" line114="" line115="            const promptText = new sprites.RenderText(this.message, CONTENT_WIDTH);" line116="            let systemKeyboardText: sprites.RenderText;" line117="" line118="            this.renderable = scene.createRenderable(-1, () =&gt; {" line119="                promptText.draw(screen, (screen.width &gt;&gt; 1) - (promptText.width &gt;&gt; 1), CONTENT_TOP, this.theme.colorPrompt, 0, 2)" line120="                this.drawInputArea();" line121="" line122="                if (!this.useSystemKeyboard) {" line123="                    this.drawKeyboard();" line124="                    this.drawBottomBar();" line125="                    return;" line126="                }" line127="" line128="                if (!systemKeyboardText) {" line129="                    systemKeyboardText = new sprites.RenderText(helpers._getLocalizedInstructions(), CONTENT_WIDTH);" line130="                }" line131="" line132="                screen.fillRect(0, screen.height - (PADDING &lt;&lt; 1) - systemKeyboardText.height, screen.width, screen.height, this.theme.colorBottomBackground);" line133="                systemKeyboardText.draw(screen, PADDING, screen.height - PADDING - systemKeyboardText.height, this.theme.colorBottomText);" line134="            });" line135="        }" line136="" line137="        protected drawInputArea() {" line138="            const answerLeft = ROW_LEFT + Math.floor(" line139="                ((CELL_WIDTH * ALPHABET_ROW_LENGTH) -" line140="                    CELL_WIDTH * Math.min(this.answerLength, ALPHABET_ROW_LENGTH)) / 2);" line141="" line142="            for (let i = 0; i &lt; this.answerLength; i++) {" line143="                const col = i % ALPHABET_ROW_LENGTH;" line144="                const row = Math.floor(i / ALPHABET_ROW_LENGTH);" line145="" line146="                if (this.selectionStart !== this.selectionEnd &amp;&amp; i &gt;= this.selectionStart &amp;&amp; i &lt; this.selectionEnd) {" line147="                    screen.fillRect(" line148="                        answerLeft + col * CELL_WIDTH," line149="                        INPUT_TOP + row * CELL_HEIGHT," line150="                        CELL_WIDTH," line151="                        CELL_HEIGHT," line152="                        this.theme.colorCursor" line153="                    );" line154="                }" line155="" line156="                screen.fillRect(" line157="                    answerLeft + col * CELL_WIDTH + BLANK_PADDING," line158="                    INPUT_TOP + row * CELL_HEIGHT + CELL_HEIGHT - 1," line159="                    CELL_WIDTH - BLANK_PADDING * 2," line160="                    1," line161="                    !this.useSystemKeyboard &amp;&amp; !this.blink() &amp;&amp; i === this.selectionStart ? this.theme.colorInputHighlighted : this.theme.colorInput" line162="                );" line163="" line164="                if (i &lt; this.result.length) {" line165="                    const char = this.result.charAt(i);" line166="                    screen.print(" line167="                        char," line168="                        answerLeft + col * CELL_WIDTH + LETTER_OFFSET_X," line169="                        INPUT_TOP + row * CELL_HEIGHT + LETTER_OFFSET_Y," line170="                        this.theme.colorInputText," line171="                        font" line172="                    );" line173="                }" line174="            }" line175="" line176="            // draw the blinking text cursor" line177="            if (this.useSystemKeyboard) {" line178="                if (this.selectionStart === this.selectionEnd &amp;&amp; this.selectionStart &lt; this.answerLength) {" line179="                    const col2 = this.selectionStart % ALPHABET_ROW_LENGTH;" line180="                    const row2 = Math.floor(this.selectionStart / ALPHABET_ROW_LENGTH);" line181="                    if (!this.blink()) {" line182="                        screen.fillRect(" line183="                            answerLeft + col2 * CELL_WIDTH," line184="                            INPUT_TOP + row2 * CELL_HEIGHT," line185="                            1," line186="                            CELL_HEIGHT," line187="                            this.theme.colorCursor" line188="                        );" line189="                    }" line190="                }" line191="            }" line192="        }" line193="" line194="        protected drawKeyboard() {" line195="            const top = screen.height - BOTTOM_BAR_HEIGHT - this.keyboardRows * CELL_HEIGHT - PADDING;" line196="            const left = (screen.width &gt;&gt; 1) - ((CELL_WIDTH * this.keyboardColumns) &gt;&gt; 1)" line197="            for (let j = 0; j &lt; this.keyboardRows * this.keyboardColumns; j++) {" line198="                const col3 = j % this.keyboardColumns;" line199="                const row3 = Math.idiv(j, this.keyboardColumns);" line200="" line201="                if (col3 === this.cursorColumn &amp;&amp; row3 === this.cursorRow) {" line202="                    screen.fillRect(" line203="                        left + col3 * CELL_WIDTH," line204="                        top + row3 * CELL_HEIGHT," line205="                        CELL_WIDTH," line206="                        CELL_HEIGHT," line207="                        this.theme.colorCursor" line208="                    )" line209="                }" line210="" line211="                screen.print(" line212="                    this.getSymbolForIndex(j)," line213="                    left + col3 * CELL_WIDTH + LETTER_OFFSET_X," line214="                    top + row3 * CELL_HEIGHT + LETTER_OFFSET_Y," line215="                    this.theme.colorAlphabet" line216="                )" line217="            }" line218="        }" line219="" line220="        protected drawBottomBar() {" line221="            this.drawBottomBarBackground();" line222="            this.drawShift(this.cursorRow === 3 &amp;&amp; !(this.cursorColumn &amp; 1));" line223="            this.drawConfirm(this.cursorRow === 3 &amp;&amp; !!(this.cursorColumn &amp; 1));" line224="        }" line225="" line226="        protected drawBottomBarBackground() {" line227="            screen.fillRect(0, screen.height - BOTTOM_BAR_HEIGHT, screen.width, BOTTOM_BAR_HEIGHT, this.theme.colorBottomBackground);" line228="        }" line229="" line230="        protected drawShift(highlighted: boolean) {" line231="            if (highlighted) {" line232="                screen.fillRect(" line233="                    0," line234="                    screen.height - BOTTOM_BAR_HEIGHT," line235="                    BOTTOM_BAR_BUTTON_WIDTH," line236="                    BOTTOM_BAR_HEIGHT," line237="                    this.theme.colorCursor" line238="                );" line239="            }" line240="" line241="            let shiftText = lowerShiftText;" line242="            if (this.upper) {" line243="                shiftText = upperShiftText;" line244="            }" line245="            screen.print(" line246="                shiftText," line247="                BOTTOM_BAR_SHIFT_X," line248="                screen.height - BOTTOM_BAR_HEIGHT + BOTTOM_BAR_TEXT_Y," line249="                this.theme.colorBottomText" line250="            )" line251="        }" line252="" line253="        protected drawConfirm(highlighted: boolean) {" line254="            if (highlighted) {" line255="                screen.fillRect(" line256="                    CONFIRM_BUTTON_LEFT," line257="                    screen.height - BOTTOM_BAR_HEIGHT," line258="                    BOTTOM_BAR_BUTTON_WIDTH," line259="                    BOTTOM_BAR_HEIGHT," line260="                    this.theme.colorCursor" line261="                );" line262="            }" line263="" line264="            screen.print(" line265="                confirmText," line266="                CONFIRM_BUTTON_LEFT + BOTTOM_BAR_CONFIRM_X," line267="                screen.height - BOTTOM_BAR_HEIGHT + BOTTOM_BAR_TEXT_Y," line268="                this.theme.colorBottomText" line269="            )" line270="        }" line271="" line272="        protected getSymbolForIndex(index: number) {" line273="            return getCharForIndex(index, this.upper);" line274="        }" line275="" line276="        private registerHandlers() {" line277="            controller.up.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line278="                this.moveVertical(true);" line279="            })" line280="" line281="            controller.down.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line282="                this.moveVertical(false);" line283="            })" line284="" line285="            controller.right.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line286="                this.moveHorizontal(true);" line287="            });" line288="" line289="            controller.left.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line290="                this.moveHorizontal(false);" line291="            });" line292="" line293="            controller.A.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line294="                this.confirm();" line295="            });" line296="" line297="            controller.B.onEvent(SYSTEM_KEY_DOWN, () =&gt; {" line298="                this.delete();" line299="            });" line300="        }" line301="" line302="        protected moveVertical(up: boolean) {" line303="            if (up) {" line304="                if (this.cursorRow === this.keyboardRows) {" line305="                    this.cursorRow = this.keyboardRows - 1;" line306="" line307="                    if (this.cursorColumn % 2) {" line308="                        this.cursorColumn = this.keyboardColumns - 1;" line309="                    }" line310="                    else {" line311="                        this.cursorColumn = 0;" line312="                    }" line313="                }" line314="                else {" line315="                    this.cursorRow = Math.max(0, this.cursorRow - 1);" line316="                }" line317="            }" line318="            else {" line319="                this.cursorRow = Math.min(this.keyboardRows, this.cursorRow + 1);" line320="" line321="                if (this.cursorRow === this.keyboardRows) {" line322="                    // Go to closest button" line323="                    this.cursorColumn = this.cursorColumn &gt; 5 ? 1 : 0;" line324="                }" line325="            }" line326="        }" line327="" line328="        protected moveHorizontal(right: boolean) {" line329="            if (right) {" line330="                this.cursorColumn = (this.cursorColumn + 1) % this.keyboardColumns;" line331="            }" line332="            else {" line333="                this.cursorColumn = (this.cursorColumn + (this.keyboardColumns - 1)) % this.keyboardColumns;" line334="            }" line335="        }" line336="" line337="        protected confirm() {" line338="            if (this.cursorRow === 3) {" line339="                if (this.cursorColumn % 2) {" line340="                    this.confirmPressed = true;" line341="                }" line342="                else {" line343="                    this.upper = !this.upper;" line344="                }" line345="            }" line346="            else {" line347="                if (this.selectionStart &gt;= this.answerLength) return;" line348="" line349="                const index = this.cursorColumn + this.cursorRow * this.keyboardColumns" line350="                const letter = getCharForIndex(index, this.upper);" line351="" line352="                if (!this.result) {" line353="                    this.result = letter;" line354="                }" line355="                else {" line356="                    this.result += letter;" line357="                }" line358="" line359="                this.changeTime = game.runtime();" line360="" line361="                this.changeInputIndex(1);" line362="            }" line363="        }" line364="" line365="        protected delete() {" line366="            if (this.selectionStart &lt;= 0) return;" line367="" line368="            this.result = this.result.substr(0, this.result.length - 1);" line369="            this.changeInputIndex(-1);" line370="        }" line371="" line372="        protected changeInputIndex(delta: number) {" line373="            this.selectionStart += delta;" line374="            this.selectionEnd = this.selectionStart;" line375="        }" line376="" line377="        protected blink() {" line378="            return Math.idiv(game.runtime() - this.changeTime, 500) &amp; 1;" line379="        }" line380="    }" numlines="381"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="U~,/qii@n$gUUqae8$r;" x="1657" y="0"><mutation name="getCharForIndex" functionid="Blj*6$3s@eE;0]1-44%w"><arg name="index" id="fc4r6gn4iuz5w9ov97vcf" type="number"></arg><arg name="upper" id="4izhswwcneh13wm872w6lxa" type="boolean"></arg></mutation><field name="function_name">getCharForIndex</field><value name="fc4r6gn4iuz5w9ov97vcf"><block type="argument_reporter_number" id="-lOGgz)I}jbs!fs$N8c`"><mutation duplicateondrag="true"></mutation><field name="VALUE">index</field></block></value><value name="4izhswwcneh13wm872w6lxa"><block type="argument_reporter_boolean" id="%a!qg=A`(t@4ztfSIB4K"><mutation duplicateondrag="true"></mutation><field name="VALUE">upper</field></block></value><statement name="STACK"><block type="controls_if" id="=wg9NUSzjc0Gk?Ih]`p."><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="OUb3pg.c/$a;x;G!MbvB"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ZGP#yEM(_1;*}m~;FkB@"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="^7;UmU2vHaQpx:-eDOn("><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="V8YCYMvvA=bh$@ZnLf3l"><field name="VALUE">index</field></block></value><value name="B"><shadow type="math_number" id="`[G_}%:W;*yd/X2/n7sP"><field name="NUM">26</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="%p*H)Tv%n-fdUJqPdw8L"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="~yVf3IT/D,t{3dz33NX/"><field name="NUM">0</field></shadow><block type="stringFromCharCode" id="fgB.*Tj38|@SygmQ`XG@"><value name="code"><block type="math_arithmetic" id="8V5HK9}|3F^9VuyN:u8i"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id=")zgQ*Oy/.;%+u,Oe#(Kz"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="?CUjL:5JxUM)l~rz+Mjj"><field name="VALUE">index</field></block></value><value name="B"><shadow type="math_number" id="9^@FM%=)~)?|{4u{v0;i"><field name="NUM">0</field></shadow><block type="typescript_expression" id="WP)7CS:7F%L~=aXm3-qd"><field name="EXPRESSION">(upper ? 65 : 97)</field></block></value></block></value></block></value></block></statement><statement name="ELSE"><block type="controls_if" id="^zHjrO1Cl?M9_^AR^mE]"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="8TKs5DM_RCVTf^;J48E%"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="E^`#lbKxNKdVoWq:SlOm"><field name="VALUE">upper</field></block></value><statement name="DO0"><block type="function_return" id="?;0$)_WNkn!vIOJR/]ri"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="]t17ObaLev)f3#C2u]AR"><field name="NUM">0</field></shadow><block type="lists_index_get" id="i@*FS^`;G)m9fWH~tzKn"><value name="LIST"><block type="variables_get" id="{E5O}2h|fGve+r/D^4)F"><field name="VAR" id="kwmY?fXF^c~{imSBB^;P">digitsUpper</field></block></value><value name="INDEX"><shadow type="math_number" id="R0z.EhiJtK)(i!jix%=]"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="q-KaO5S21~%uvpV+vrLg"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="37!F*.uOQwGmUM|Mf/br"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="M{Q(?-Y]G7yjvDz2G7dw"><field name="VALUE">index</field></block></value><value name="B"><shadow type="math_number" id="h0JEj}Vyu30=iw7Ct11~"><field name="NUM">26</field></shadow></value></block></value></block></value></block></statement><statement name="ELSE"><block type="function_return" id="bj^aOe3I?)Fq+/CWC0|T"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="-7$k!Vv6wNQU/T!pbj=."><field name="NUM">0</field></shadow><block type="text_join" id="T/F9hGRsZTnd(8X%~rji"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="9vfd@~V!9@eIz|#Al26W"><field name="TEXT"></field></shadow><block type="math_arithmetic" id="5XH6sz9-|++2VO246H,s"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="OuUIrUGI;ha^68O:psmh"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="VM!ifp9ymPQN}lDr/6q)"><field name="VALUE">index</field></block></value><value name="B"><shadow type="math_number" id=".cb.5qV0#SZ]DuBf{9Yv"><field name="NUM">26</field></shadow></value></block></value></block></value></block></statement></block></statement></block></statement></block><block type="function_definition" id="Q(;@#@O-}R:`1t}6VDJg" x="2400" y="0"><mutation name="askForString" functionid="=wgcz]Ig]`Jv/5)kYbre"><arg name="message" id="w6vrfo93p0ffvlkbuc7hh" type="string"></arg><arg name="answerLength" id="tqmhw2rjtuycmy93edwm" type="number"></arg><arg name="useOnScreenKeyboard" id="c9dza5abmyp5fjpwnsg4" type="boolean"></arg></mutation><field name="function_name">askForString</field><value name="w6vrfo93p0ffvlkbuc7hh"><block type="argument_reporter_string" id=":.4K$eIC%5%NS$?KiKCr"><mutation duplicateondrag="true"></mutation><field name="VALUE">message</field></block></value><value name="tqmhw2rjtuycmy93edwm"><block type="argument_reporter_number" id="a[cB@ySLmj]m9x,,J]ZU"><mutation duplicateondrag="true"></mutation><field name="VALUE">answerLength</field></block></value><value name="c9dza5abmyp5fjpwnsg4"><block type="argument_reporter_boolean" id="(h!.V_%m;OeBQ7Vo`9^4"><mutation duplicateondrag="true"></mutation><field name="VALUE">useOnScreenKeyboard</field></block></value><statement name="STACK"><block type="typescript_statement" id="P4dy[DWTka%_yH=[Zj5y"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let p = new game.Prompt();" numlines="1" declaredvars="p"></mutation><next><block type="typescript_statement" id="%?WR}63fve/J;U1q^6ta"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const result = p.show(console.inspect(message), answerLength, useOnScreenKeyboard);" numlines="1" declaredvars="result"></mutation><next><block type="function_return" id="Z[4LzW?m)Hzs-Emtr_q}"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="i!?-cV*kBnV(S_i/9aRO"><field name="NUM">0</field></shadow><block type="variables_get" id="Zt@31pxK$:7O.$L@@;Am"><field name="VAR" id="0ivl:s]}}9MTRc:msVEL">result</field></block></value></block></next></block></next></block></statement></block></xml>